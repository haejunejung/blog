name: CI
on: 
    push:
      branches: ['main']
    pull_request:
      branches: ['main']
jobs:
    lhci:
        name: Lighthuse
        runs-on: ubuntu-latest
        steps:
            - name: Checkout
              uses: actions/checkout@v4
            - name: Set up Node
              uses: actions/setup-node@v4
              with:
                node-version: 20

            - name: Enable Corepack
              run: corepack enable
            - name: Install Dependencies
              run: yarn install --frozen-lockfile
            - name: Build
              run: yarn build
            - name: Run Lighthouse CI
              run: |
                npm install -g @lhci/cli
                lhci autorun || echo "Failed to Run Lighthouse CI"