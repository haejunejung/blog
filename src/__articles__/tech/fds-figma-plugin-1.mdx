import IconSlackMessage from "./assets/icon-slack-message.png"
import IconQuestion from "./assets/icon-question.png"
import IconOriginalProcess from "./assets/icon-original-process.png"
import IconUseTag from "./assets/icon-use-tag.png"
import IconFigmaBanner from "./assets/icon-figma-banner.png"
import IconFlow from "./assets/icon-flow.png"

# 띵동! 아이콘이 도착했어요 (1)

이번 글은 2024년에 새로 입사한 Blue Garage에서 **아이콘을 어떻게 관리하면 좋을지**에 대해서
고민한 흔적입니다. 기술적인 이야기보다는 문제를 발견하고 해결하기 위해 고민한 흔적 위주로 작성했고,
다음 파트에서는 기술적인 이야기들을 담아낼 예정이에요.

## 목차
1. 문제 상황을 발견하다!
2. 기존에는 어떻게 관리되고 있었을까?
3. 아이콘 폰트 vs SVG Sprite
4. 피그마 플러그인을 활용해보자!

## 1. 문제 상황을 발견하다!
제가 Slack 채널에 들어가고 아래와 같은 메시지가 올라오는 것을 볼 수 있었습니다. 
아이콘이 추가, 수정 그리고 삭제가 이뤄질 때마다 메시지가 오는 것을 볼 수 있었죠.
이번 달에만 3~4회나 상황이 반복되는 것을 보며 아이콘 수정에 필요한 리소스를 
효율적으로 관리할 필요가 있다고 느꼈습니다.

<img src={IconSlackMessage} alt="Icon Slack Message" />

## 2. 기존에는 어떻게 관리되고 있었을까?
### 2-1. 프로세스
입사한 지 얼마 되지 않았기 때문에, 기존에는 어떤 방식으로 관리되고 있는지부터 알아보았고, 
기존에는 다음과 같은 프로세스로 진행되고 있었습니다.
1. 디자이너가 figma에서 아이콘 작업을 진행한다.
2. 작업한 아이콘을 반영해달라고 Slack을 통해 프론트엔드 팀에 요청한다.
3. 아이콘 관리자가 요청을 확인하고, 아이콘을 다운받아 가공한 후 Pull Request를 올린다.
4. 프론트엔드팀이 Pull Request를 확인하고 변경 사항을 수정한 후 Merge한다.

<img src={IconQuestion} alt="Icon Question" />
<img src={IconOriginalProcess} alt="Icon Original Process" />

> <span style={{color: "gray" }}>기존에 아이콘을 개발단에서 사용할 때는 **아이콘을 웹폰트 형식으로 사용**하고 있었기 때문에
단순히 인라인 SVG를 사용하는 것이 아닌 한 번의 가공이 이뤄져야만 했습니다.</span>

### 2-2 문제점
기존 방식에는 크게 세 가지의 문제점이 존재했습니다.
1. 사소한 아이콘 변경이 발생할 때마다 디자이너와 개발자의 소통이 필요하다.
2. 아이콘이 실제로 적용될 때까지 어느정도의 시간이 걸리는지 알 수 없으며, 제대로 반영되고 있는지 확인하기 어려웠다.
3. 아이콘 관리자가 모든 작업을 담당했기 때문에, 부재 시 아이콘을 변경하거나 개발단에 넣을 수 없었다.

### 2-3 개선점
기존에 사용 중인 아이콘들에 영향을 미치지 않으면서, 기존의 문제점들을 고쳐보기로 했습니다.
개선의 목표는 다음과 같이 잡았습니다.
1. 아이콘 등록을 간소화하자
2. 아이콘 등록을 자동화하자
3. 디자이너가 빠르게 아이콘 미리보기를 볼 수 있도록 하자

## 3. 아이콘 폰트 vs SVG Sprite
아이콘을 관리하는 방법에는 아이콘 폰트와 SVG Sprite 두 가지 방법을 고민했고, 
**결론적으로 아이콘 폰트가 현재로서 더 적합하다**고 판단했습니다.

> <span style={{ color: "gray" }}>저희 팀은 React Native로 웹, 앱을 모두 대응하고 있어 RN기준으로 고민했어요.</span>

### 3-1. 아이콘 폰트
아이콘 폰트는 아이콘을 글자처럼 취급하는 방식입니다. 아이콘이 글자의 형태로 저장되어 있어
특정 코드나 클래스를 사용해서 원하는 아이콘을 불러올 수 있죠. 기존의 SVG 아이콘들을 
TTF 폰트 파일로 압축하고, 이를 JSON 파일로 매핑하여 사용할 수 있습니다.
폰트 파일 하나로 여러 개의 아이콘을 사용하고 파일이 가벼워서 로딩 속도가 빠르다는 장점이 있죠.
또, 이미 프로젝트 전반에서 사용 중이라 추가적인 설정 없이 바로 쓸 수 있다는 점도 큰 장점이었습니다.

하지만 아이콘 폰트는 몇 가지 단점도 존재합니다. 예를 들어, 폰트 파일 크기가 크면
초기 로딩 시간이 길어질 수 있고, 아이콘이 변경될 때마다 새로운 폰트 파일을 다운로드해야 한다는 문제도 있습니다.
또, 사용하지 않는 아이콘까지 모두 포함된 폰트 파일을 다운로드 받아야 해서 효율성이 떨어질 수 있죠.

### 3-2. SVG Sprite
SVG Sprite는 최근에 많이 사용되는 방법으로 하나의 SVG 파일에 여러 아이콘을 모아서 관리하는 방식입니다.
'use' 태그를 사용해 아이콘을 불러올 수 있으며 멀티컬러 아이콘을 지원하는 장점이 있습니다. 가장 큰 장점은
필요한 아이콘만 선택적으로 불러올 수 있다는 점입니다. 즉, 사용하지 않는 아이콘은 로딩하지 않아서
성능 상 이점이 크다고 합니다.

하지만 SVG Sprite는 추가적인 설정이 필요하고, SVG 파일을 직접 관리해야 한다는 점이 있었습니다.
SVG Sprite 아이콘은 CDN에서 제공할 수 없다는 제약도 있습니다. 이는 [MDN의 SVG use 태그 문서](https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use)에서 확인할 수 있었습니다.

<img src={IconUseTag} alt="Icon Use Tag" />

### 3-3. 결론
여러 조건들을 고려한 결과 현재의 아이콘 폰트를 유지하는게 더 나을 것이라고 판단했습니다. 그 이유는 아래와 같았습니다.

1. 이미 사용 중인 아이콘을 그대로 사용할 수 있어 기존 작업에 영향을 미치지 않을 수 있다.
2. 그라디언트나 복잡한 CSS 요소를 고려하지 않아도 된다. 디자이너가 figma에서 미리 디자인하고 이를 그대로 사용하고 있는 방식이기 때문이다.
3. 아이콘 개수가 적고 효율성 차이가 미미하다. 현재 아이콘 개수가 수십 개 정도라 SVG Sprite 방식으로 바꾼다고 하더라도 비약적인 효율성 차이를 기대하기 어렵다.

> <span style={{ color: "gray" }}>현재 기준으로 아이콘 폰트가 더 적합할 것 같다고 했지만, 
막상 SVG Sprite 방식이 더 효율적이고 개발자 경험을 향상시킬 수도 있다고 생각합니다. 
대부분의 글을 웹을 기준으로 토론을 진행하여서 앱에서도 유효한지 검증이 필요할 것 같아요. 
이후에 시간이 된다면 SVG Sprite 방식도 만들고 비교해보고 싶다고 생각이 드네요. </span>

## 4. 피그마 플러그인을 활용해보자!
기존의 아이콘 폰트 방식을 유지하면서 개선을 진행하기 위해서 피그마 플러그인을 활용해보기로 했습니다.

<img src={IconFigmaBanner} alt="Icon Figma Banner" />

### 4-1. 피그마 플러그인, 무엇을 할 수 있을까? 
피그마 플러그인은 기본 기능만으로 해결하기 어려운 작업을 더 쉽게 만들어 주는 도구입니다. 
이를 활용하면 디자인 작업을 자동화하고, 개발과의 협업을 원활하게 진행하며, 데이터와 연동하여 디자이너의 경험을 향상시킬 수 있습니다.
예를 들어, 다음과 같은 기능을 제공할 수 있습니다.

1. 에셋 및 컴포넌트 관리 - 특정 컴포넌트를 일괄 내보내거나, SVG·PNG 등의 포맷으로 변환할 수 있습니다.
2. 반응형 디자인 및 다양한 기기 미리보기 - 여러 해상도에서 디자인이 어떻게 보이는지 미리 확인할 수 있습니다.
3. 워크플로우 자동화 - 반복적인 작업을 단축키 하나로 실행하도록 설정할 수 있습니다.

### 4-2. 우리 시스템에 피그마 플러그인 접목시키기
디자이너가 아이콘 작업을 마친 후, 피그마 플러그인을 실행해 간단한 버튼 클릭만으로 디자인 시스템 레포지토리에 PR을 생성할 수 있도록 하면 좋겠다고 생각했습니다.
피그마의 일괄 내보내기 기능과 GitHub API를 활용하면, 디자인과 개발 간의 협업을 더 매끄럽게 만들 수 있을 것 같았습니다.
전체적인 흐름은 다음과 같이 진행되도록 만들고자 했습니다.

1. 환경 설정  
   - 피그마 플러그인을 실행한 후 GitHub 저장소와 연동하는 환경을 설정합니다.  
   - 환경 설정은 한 번만 하면 저장되며, 이후에는 별도의 재설정 없이 사용할 수 있습니다.  
   - 필요에 따라 설정을 수정할 수도 있습니다.  

2. 아이콘 불러오기  
   - 디자인 파일에서 아이콘 프레임을 선택하고, 현재 아이콘 리스트를 불러옵니다.  

3. 아이콘 변경 사항 확인 및 반영  
   - 추가, 수정, 삭제된 아이콘 목록을 미리 보고, 필요한 경우 '반영하기' 버튼을 눌러 적용합니다.  

4. GitHub에 PR 생성  
   - 변경된 아이콘 데이터를 기반으로 GitHub API를 활용해 자동으로 Pull Request(PR)을 생성합니다.  

5. GitHub Actions 실행  
   - PR이 생성되면 GitHub Actions가 실행됩니다.  
   - 이 과정에서 `fantasticon`을 이용해 TTF 및 JSON 파일을 자동으로 생성하고, 결과물을 PR에 반영합니다.  

6. Storybook에서 반영된 아이콘 확인  
   - 디자이너는 Storybook을 통해 아이콘이 올바르게 반영되었는지 실시간으로 확인할 수 있습니다.  

7. Slack 알림 발송  
   - 아이콘이 정상적으로 반영되면 Slack 봇이 "띵동! 아이콘이 변경되었어요!"라는 메시지를 전송합니다.  

8. 개발자 검토 및 적용  
   - 개발자는 PR을 확인하고, 변경된 아이콘이 코드에 미치는 영향을 검토한 후 필요한 수정 작업을 진행합니다.  

<img src={IconFlow} alt="Icon Flow" />

### 4-3. 우리가 얻을 수 있는 긍정적인 효과는?
이 과정을 통해 디자인과 개발 간의 핸드오프 비용을 줄이고, 
협업을 더욱 효율적으로 만들 수 있을 것이라 예상하고 있습니다. 

1. 디자이너의 반복 작업 감소  
   - 기존에는 디자인이 수정될 때마다 아이콘을 수동으로 내보내고, 개발자가 이를 직접 반영해야 했습니다.  
   - 플러그인을 활용하면 버튼 한 번만 클릭하면 변경 사항을 PR로 반영할 수 있어, 디자이너가 반복적인 작업에 소모하는 시간을 줄일 수 있습니다.  

2. 개발자의 작업 시간 단축  
   - 변경된 아이콘이 자동으로 PR로 생성되므로, 개발자가 직접 파일을 변환하거나 저장소에 반영할 필요가 없습니다.  
   - 또한, Storybook을 통해 변경 사항을 즉시 확인할 수 있어 QA 과정이 더욱 간편해집니다.  

3. 디자인-개발 간 커뮤니케이션 비용 절감  
   - 변경된 아이콘이 실시간으로 반영되고, Slack 알림을 통해 즉각 공유되므로 "이 아이콘 반영됐나요?" 같은 불필요한 커뮤니케이션을 줄일 수 있습니다.  

4. 일관된 아이콘 관리  
   - GitHub Actions를 활용해 아이콘 파일을 일괄적으로 변환하고 반영하므로, 프로젝트 내에서 아이콘 사용 방식이 통일됩니다.  

결과적으로, 디자이너는 더 창의적인 작업에 집중할 수 있고, 개발자는 코드 반영 과정을 단순화할 수 있어 전체적인 생산성이 향상될 것으로 기대됩니다.  

## 5. 정리
지난 며칠간 아이콘을 어떻게 관리하면 좋을지에 대해서 여러 고민들을 했고,
어느 정도의 틀이 잡혀서 개발을 진행했고 피드백을 받으며 점점 개선시키는 중입니다.
한 번도 진행해본 적 없는 피그마 플러그인 개발이지만 UX, DX를 모두 향상시킬 수 있다는 점에서
매우 흥미진진하게 진행할 수 있을 것 같습니다.

여러 고민 중에서 가장 많이 고민했던 것은 아이콘 폰트 vs SVG Sprite였습니다. [https://cloudfour.com/thinks/svg-icon-stress-test/](https://cloudfour.com/thinks/svg-icon-stress-test/)
에서 댓글로 사과 vs 오렌지를 비유하는 것을 보며 무엇이 더 나은지는 비교할 수 없겠다고 생각이 들었고,
그 때부터는 "**가능한 리소스가 적게 들면서, 현 상황을 빠르게 개선시킬 수 있는 방안**"을 고려했던 것 같습니다.

**다음 편에서는 실제 개발을 하면서 겪은 기술적인 내용과 오픈 소스로 발전시키기 위해 노력한 것**들을 정리해보도록 할게요!